*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans TC',sans-serif;
  background:#1C6F73;
  color:#fff;
}
.screen{display:none;min-height:100vh;padding:12px}
.screen.active{display:block}

/* ---------- Topbar ---------- */
.topbar{
  display:flex;
  align-items:center;
  gap:8px;
}
.topbar h1{
  flex:1;
  text-align:center;       /* 置中 */
  font-size:28px;          /* 大字 */
  font-weight:800;
  margin:12px 0;
  letter-spacing:1px;
}
.nav-btn{background:transparent;border:none;padding:6px;border-radius:10px}

/* Puzzle header（左返回｜中進度｜右排行榜） */
.puzzle-topbar{
  position: relative;
  display: grid;
  grid-template-columns: 48px 1fr 48px;
  align-items: center;
  padding-top: 8px;
}
.topbar-center{
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:800;
  font-size:18px;
  letter-spacing:.5px;
}

/* ---------- Cover ---------- */
.cover-top img{display:block;max-width:720px;width:100%;margin:0 auto;border-radius:12px}
.cover-form{display:flex;flex-direction:column;gap:12px;max-width:420px;margin:18px auto 0}
.cover-form input{padding:12px 14px;border-radius:10px;border:2px solid #eae6da;font-size:18px}
.cover-form button{padding:12px;border:none;border-radius:10px;background:#eae6da;color:#114a4d;font-weight:700;font-size:18px}

/* ---------- Level List（名稱靠左大字｜同列右側 0/20｜更右側徽章｜最右箭頭） ---------- */
.level-list{
  list-style:none;
  padding:0;
  margin:16px auto 12px;
  max-width:720px;
  display:flex;
  flex-direction:column;
  gap:16px;
}

/* 膠囊卡片 */
.level-pill{
  display:grid;
  grid-template-columns: 1fr auto auto; /* 左名稱區 | 問號圓 | 箭頭圓 */
  align-items:center;
  gap:14px;
  background:#e7ecdf;
  color:#114a4d;
  border-radius:24px;
  padding:18px 18px 18px 24px;
  border:2px solid rgba(234,230,218,.9);
  box-shadow: 0 1px 0 rgba(0,0,0,.03) inset;
}

/* 左邊名稱+進度 */
.level-left{
  display:flex;
  align-items:center;
  gap:12px;
}
.level-title{
  font-size:28px;
  font-weight:900;
  letter-spacing:1px;
}
.level-progress{
  font-size:18px;
  font-weight:700;
  opacity:0.85;
}

/* 問號徽章 */
.badge-circle{
  width:56px; height:56px;
  border-radius:50%;
  background:rgba(17,74,77,.08);
  display:flex; align-items:center; justify-content:center;
}
.badge-circle img{
  width:36px; height:36px; object-fit:contain; opacity:.9;
}

/* 箭頭按鈕 */
.enter-circle{
  width:56px; height:56px;
  border-radius:50%;
  border:none;
  background:rgba(17,74,77,.15);
  display:flex; align-items:center; justify-content:center;
  cursor:pointer;
}
.enter-circle img{ width:26px; height:26px; }

/* 小螢幕微調 */
@media (max-width: 420px){
  .level-title{ font-size:24px; }
  .level-progress{ font-size:16px; }
  .badge-circle, .enter-circle{ width:52px; height:52px; }
  .badge-circle img{ width:32px; height:32px; }
  .enter-circle img{ width:24px; height:24px; }
}

/* ---------- Puzzle ---------- */
.puzzle-title{
  text-align:center;
  font-size:32px;     /* Q# 大字置中 */
  font-weight:900;
  margin:8px 0 6px;
}
.board-wrap{ display:flex; justify-content:center; margin:8px 0 10px; }
#board{
  background:#F7F7F7;
  border-radius:12px;
  box-shadow:0 0 0 10px #eae6da inset; /* 米白外框 */
}

/* 上色工具列 */
.toolbar{ display:flex; justify-content:center; gap:8px; flex-wrap:wrap; margin:6px 0 10px; }
.toolbar .tool{ background:#fff; border:2px solid #eae6da; border-radius:10px; padding:6px; outline:none; }
.toolbar img{ height:40px; }
.tool.active{
  border-color:#114a4d;
  box-shadow:
    0 0 0 4px rgba(255,255,255,.95) inset, /* 內白暈更厚 */
    0 0 0 3px #114a4d;                     /* 外黑框更粗 */
  transform: translateY(-1px);
}
.toolbar .tool{ border:10px solid #eae6da; } /* 未選狀態維持原樣 */

/* 底部：上一題｜小小未答｜下一題 */
.puzzle-footer{ display:flex; align-items:center; justify-content:center; gap:18px; margin:12px 0 24px; }
.pill{ background:#fff; color:#114a4d; border:2px solid #eae6da; border-radius:999px; padding:8px 14px; font-weight:800; }
.status-small{ width:42px; height:42px; display:block; }

/* ---------- Badges & Leaderboard ---------- */
.badge-wrap{display:flex;justify-content:center;margin:20px 0}
.badge-wrap img{max-width:60vw;height:auto}
.badge-actions{display:flex;justify-content:center}
.leaderboard{max-width:640px;margin:0 auto;background:#155f63;border:2px solid #eae6da;border-radius:16px;padding:10px}
.lb-row{display:flex;justify-content:space-between;padding:8px;border-bottom:1px solid #eae6da}
.lb-row:last-child{border-bottom:none}
.lb-name{font-weight:700}

/* 讓排行榜頁的 topbar 左鍵＋中標題＋右側留白排好 */
#screen-leaderboard .topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;   /* 關鍵：不讓 <h1> 把按鈕擠掉 */
  padding: 8px 10px;
}

/* 給返回圖示明確尺寸，沒載到圖也仍然有可點擊面積 */
#screen-leaderboard .topbar .nav-btn img{
  width:28px;
  height:28px;
  display:block;
}

/* Leaderboard 進度條 (5 關) */
.lb-row-bars{ align-items: center; gap:12px; }
.lb-bars{
  display:grid;
  grid-template-columns: repeat(5, 1fr);
  gap:8px; width: 60%;
}
.lb-bars .bar{
  position:relative; height:16px; border:1px solid #eae6da; border-radius:8px; background:rgba(255,255,255,.15); overflow:hidden;
}
.lb-bars .bar .fill{ height:100%; background:#eae6da; }
.lb-bars .bar span{
  position:absolute; inset:0; font-size:10px; line-height:16px; text-align:center; color:#114a4d; font-weight:800;
}
@media (max-width:560px){
  .lb-bars{ width:100%; }
  .lb-bars .bar span{ font-size:9px; }
}

/* --- Leaderboard: total 與進度條 --- */
.lb-row{
  display:flex;
  align-items:center;
  gap:12px;
}

.lb-total{
  background:#fff;
  color:#114a4d;
  font-weight:800;
  border:2px solid #eae6da;
  border-radius:999px;
  padding:4px 10px;
  min-width:92px;            /* 例如 25 / 100 */
  text-align:center;
}

.lb-bars{
  display:flex;
  gap:8px;
  flex:1;
  justify-content:flex-end;
}

.lb-bar{
  width:84px;                /* 每關一條 */
  height:12px;
  border-radius:999px;
  background:rgba(255,255,255,.14);
  overflow:hidden;
  box-shadow: inset 0 0 0 1px rgba(234,230,218,.6);
}
.lb-bar > i{
  display:block;
  height:100%;
  width:0%;
  background:#eae6da;        /* 會用 JS 覆蓋顏色與寬度 */
}

