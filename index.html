<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Brain Block / 脳ブロック</title>

  <!-- 既有：網站小圖標 -->
  <link rel="icon" href="public/app-icon/app_icon.png" />

  <!-- ✅ PWA 必備：Manifest + 主題色 -->
  <link rel="manifest" href="./manifest.webmanifest" />
  <meta name="theme-color" content="#1C6F73" />

  <!-- ✅ iOS：加入主畫面圖示與全螢幕樣式 -->
  <link rel="apple-touch-icon" href="public/icons/app-192.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <!-- （可選）顯示於 iOS 主畫面名稱，預設會用 <title> -->
  <!-- <meta name="apple-mobile-web-app-title" content="Brain Block" /> -->

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- Cover -->
  <section id="screen-cover" class="screen active">
    <div class="cover-top">
      <img src="public/cover/cover_top.png" alt="cover" />
    </div>
    <div class="cover-form">
      <input id="playerName" placeholder="請輸入玩家名稱" />
      <button id="btnStart">開始</button>
    </div>
  </section>

  <!-- Level Select -->
  <section id="screen-levels" class="screen">
    <header class="topbar">
      <button class="nav-btn" data-go="cover" aria-label="返回">
        <img src="public/icons/nav/arrow_back.svg" alt="" />
      </button>
      <h1>選擇關卡</h1>
    </header>
    <ul id="levelList" class="level-list"></ul>
  </section>

  <!-- Puzzle -->
  <section id="screen-puzzle" class="screen">
    <header class="topbar puzzle-topbar">
      <button class="nav-btn" data-go="levels" aria-label="返回關卡">
        <img src="public/icons/nav/arrow_back.svg" alt="">
      </button>
      <div class="topbar-center"><span id="levelProgress">0/20</span></div>
      <button class="nav-btn" id="btnToLeaderboard" aria-label="排行榜">
        <img src="public/icons/nav/leaderboard.svg" alt="">
      </button>
    </header>

    <h2 class="puzzle-title">Q<span id="qNumber"></span></h2>

    <div class="board-wrap">
      <canvas id="board" width="480" height="300" aria-label="棋盤"></canvas>
    </div>

    <!-- I/O/L/T/S 上色工具列（點一下選色，點棋盤逐格上色；最後一顆為橡皮擦） -->
    <div class="toolbar" id="paintToolbar">
      <button class="tool" data-piece="I"><img src="public/icons/pieces/btn_I.png" alt="I"></button>
      <button class="tool" data-piece="O"><img src="public/icons/pieces/btn_O.png" alt="O"></button>
      <button class="tool" data-piece="L"><img src="public/icons/pieces/btn_L.png" alt="L"></button>
      <button class="tool" data-piece="T"><img src="public/icons/pieces/btn_T.png" alt="T"></button>
      <button class="tool" data-piece="S"><img src="public/icons/pieces/btn_S.png" alt="S"></button>
      <button class="tool" data-piece="." aria-label="橡皮擦"><img src="public/icons/btn_clear.svg" alt=""></button>
    </div>

    <div class="puzzle-footer">
      <button id="prevQ" class="pill">上一題</button>
      <img id="statusImg" class="status-small" src="public/icons/status/btn_unsolved.svg" alt="未答">
      <button id="nextQ" class="pill">下一題</button>
    </div>
  </section>

<!-- Badge Page -->
<section id="screen-badge" class="screen">
  <header class="topbar badge-topbar">
    <button class="nav-btn" data-go="levels" aria-label="返回">
      <img src="public/icons/arrow-left.svg" alt="返回" />
    </button>
    <h1>徽章</h1>
    <div style="width:48px;"></div> <!-- 保持標題置中 -->
  </header>

  <div class="badge-wrap">
    <img id="badgeBig" src="" alt="badge" />
  </div>

  <div class="badge-actions">
    <button class="pill" id="btnBadgeNext">前往下一關</button>
  </div>
</section>

  <!-- Leaderboard -->
  <section id="screen-leaderboard" class="screen">
    <header class="topbar">
      <button class="nav-btn" data-go="levels" aria-label="返回">
        <img src="public/icons/nav/arrow_back.svg" alt="" />
      </button>
      <h1>排行榜</h1>
    </header>
    <div id="leaderboardList" class="leaderboard"></div>
  </section>

  <script src="main.js?v=20251011fetch2"></script>
</body>
</html>
